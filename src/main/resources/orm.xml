<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd"
	version="1.0">
    
    <!-- Consulta de todos los avisos de un cliente -->
    <named-query name="avisosCliente">
    	<query>
			<![CDATA[
    		select a
    		from Aviso a
    		where a.cliente = :cliente	
            order by a.fechaInicioObra
    		 ]]>
		</query>
    </named-query>
    
    <!-- Consulta de todas las notificaciones de un aviso -->
    <named-query name="notificacionesAviso">
    	<query>
			<![CDATA[
    		select n
    		from Notificacion n
    		where n.aviso = :aviso
    		order by n.fechaHoraEnvio	
    		 ]]>
		</query>
    </named-query>
    
    <!-- Consulta de registros por fechas -->
    <named-query name="registrosNotificacionesPorFecha">
    	<query>
			<![CDATA[
    		select r
    		from RegistroNotificacion r
    		where r.fechaHoraNotificacion between :from and :to
    		order by r.fechaHoraNotificacion	
    		 ]]>
		</query>
    </named-query>
    
    <!-- Consulta de registros por fechas -->
    <named-query name="registrosNotificacionesPorCliente">
    	<query>
			<![CDATA[
    		select r
    		from RegistroNotificacion r
    		where r.cliente = :cliente
    		order by r.fechaHoraNotificacion	
    		 ]]>
		</query>
    </named-query>

</entity-mappings>